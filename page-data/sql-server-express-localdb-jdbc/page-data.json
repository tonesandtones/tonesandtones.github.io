{"componentChunkName":"component---src-templates-post-template-js","path":"/sql-server-express-localdb-jdbc/","webpackCompilationHash":"2743f50a05201badbd91","result":{"data":{"post":{"id":"947bd3ac-97c4-5e49-b5b0-457fac8c5623","html":"<p>I was working on a project recently that uses SQL Server in the deployed environments, and <a href=\"https://docs.microsoft.com/sql/database-engine/configure-windows/sql-server-express-localdb\">SQL Server Express LocalDB</a> for local dev, and I wanted to connect to it with <a href=\"https://www.jetbrains.com/datagrip/\">Jetbrains DataGrip</a> instead of SQL Server Management Studio.</p>\n<hr>\n<h3>Update 2020-02-25</h3>\n<p><em>Well actually, it kind of is pretty easy. Iâ€™m not sure when DataGrip gained improved support for SqlLocalDB, but connecting to a localdb instance is now fairly straightforward as of DataGrip 2019.3 (and probably earlier). You can find the latest instructions at <a href=\"https://www.jetbrains.com/help/datagrip/connecting-to-sql-server-express-localdb.html\">https://www.jetbrains.com/help/datagrip/connecting-to-sql-server-express-localdb.html</a></em></p>\n<p><em>Unlike the original post below, you no longer need to mess around with the named pipe nonsense, DataGrip will discover the available databases for you.</em></p>\n<p><strong><em>Original post continues below</em></strong></p>\n<hr>\n<p>Â </p>\n<p>Turns out thatâ€™s not so straightforward ðŸ˜’</p>\n<ul>\n<li>DataGrip is a Java-based application and uses JDBC to connect to databases.</li>\n<li>LocalDB only supports named pipes, it doesnâ€™t support TCP/IP, not even from <code class=\"language-text\">localhost</code>.</li>\n<li>The Microsoft mssql-jdbc driver doesnâ€™t support named pipes and therefore canâ€™t connect to LocalDB, see the <a href=\"https://github.com/Microsoft/mssql-jdbc/issues/769\">Github discussion</a>.</li>\n</ul>\n<p>Â¯\\_(ãƒ„)_/Â¯</p>\n<blockquote>\n<p>This solution is from this <a href=\"https://stackoverflow.com/questions/11345746/connecting-to-sql-server-localdb-using-jdbc/24412037#24412037\">Stackoverflow answer</a>, I just pulled together some of the context around what the problem is and why the solution is <em>still</em> a thing.</p>\n</blockquote>\n<p>Enter the <a href=\"http://jtds.sourceforge.net/\">jTDS driver</a>. It <em>does</em> support named pipes, but itâ€™s really old and hasnâ€™t seen any activity for years. That said, I found it to work for my purposes, and it might for yours too.</p>\n<p>As the <a href=\"https://stackoverflow.com/questions/11345746/connecting-to-sql-server-localdb-using-jdbc/24412037#24412037\">SO answer</a> says, a LocalDB JDBC connection string looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">jdbc:jtds:sqlserver://./DatabaseName;instance=LOCALDB#88893A09;namedPipe=true</code></pre></div>\n<p>Change <code class=\"language-text\">DatabaseName</code> to your database name, and <code class=\"language-text\">LOCALDB#xxxxxxxx</code> to the name of your LocalDB named pipe.</p>\n<p>Obviously you need to find the name of the named pipe. First up, find the name of your LocalDB instance, then get its <code class=\"language-text\">info</code>;</p>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">&gt; SqlLocalDb info\nMSSQLLocalDb\n\n&gt; SqlLocalDb info MSSQLLocalDb\nName:               mssqllocaldb\nVersion:            13.1.4001.0\nShared name:\nOwner:              ***snip***\nAuto-create:        Yes\nState:              Stopped\nLast start time:    9/12/2019 11:22:29 AM\nInstance pipe name:</code></pre></div>\n<p>My LocalDB is stopped, so start it.</p>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">&gt; SqlLocalDB start MSSQLLocalDB\nLocalDB instance &quot;mssqllocaldb&quot; started.\n\n&gt;SqlLocalDB.exe info MSSQLLocalDB\n Name:               mssqllocaldb\n Version:            13.1.4001.0\n Shared name:\n Owner:              ***snip***\n Auto-create:        Yes\n State:              Running\n Last start time:    10/12/2019 4:22:08 PM\n Instance pipe name: np:\\\\.\\pipe\\LOCALDB#C5287F00\\tsql\\query</code></pre></div>\n<p>Now that the instance is started, we can ge the named pipe details, in this case, <code class=\"language-text\">np:\\\\.\\pipe\\LOCALDB#C5287F00\\tsql\\query</code></p>\n<p>So we can now construct the jdbc connection string;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">jdbc:jtds:sqlserver://./MyDatabaseName;instance=LOCALDB#C5287F00;namedPipe=true</code></pre></div>\n<p>Finally, in DataGrip, create the database connection.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f7d36bd39463d9eb8c1a2466e6f9f27e/156be/datagrip-connection-details.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 639px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 93.27073552425665%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAACE3AAAhNwEzWJ96AAACGUlEQVQ4y41UWXvUMAzMnwAeoBS2vEEvKNc2l504jjd7dIH//1cGjXKXbOmDPjmOJUszI0emrHB1c4vXb85w9vYcn+++woUNisqj8PVoVY2yDkhyi/s0R5yZRYuq0Oji7tsPXN9+wfd1jLxwSE2BzJZixbA2pZslpH9sUa5BJayrYCSRdV6CjCQtkUpwJsm4PlXRPxW63R/YKkhL0o5xcNJWZp202SArPIxr/y1Vs1ghDxesqtggFmOVueO6QVJuxQSSIvy3siFhJQTQSgGefvdwRLM/qN8e6B/0e3s46p7ui+2Pv7QbK+QRMpJGfCMu+hucD6ibLbwQRWx5gISMBC1bqji7FkMGxVlbLglxNasNuiZRvJDrZ5PSV0fPW6hLS9OEXhMqxnJxImfUd9JZJIXl9tlVa50Gh2D1RvbG9vsY/mcR/SVa4TQhA9k+TZPmZoKjHZN2e8SZuPc4tjr0YSDl3eoCL16+wsfLKx2/atPAb7bKpKHwFyyX6eH/HueI2eOu/1wnpsXtPs1w/n6F1cUH3ddZFmmRNCVOv4PuzyocRWkQmt2gN47cp+sbXIoR157tqWdCJs4msEXTQWd7OxHs/vgbXvSYdASskww/xdYnbMayJiT41uqNnriJsDk1Kh2REHHmA/HUszWrkFXwGWMbVd2O4dAScVOs/KBTnRCJ4WWP38cZhrY7fEq0Tz0Mixg+J/DURb3/C3xPm5VysDdRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"jTDS JDBC connection in DataGrip\"\n        title=\"\"\n        src=\"/static/f7d36bd39463d9eb8c1a2466e6f9f27e/156be/datagrip-connection-details.png\"\n        srcset=\"/static/f7d36bd39463d9eb8c1a2466e6f9f27e/9ec3c/datagrip-connection-details.png 200w,\n/static/f7d36bd39463d9eb8c1a2466e6f9f27e/c7805/datagrip-connection-details.png 400w,\n/static/f7d36bd39463d9eb8c1a2466e6f9f27e/156be/datagrip-connection-details.png 639w\"\n        sizes=\"(max-width: 639px) 100vw, 639px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>","fields":{"slug":"/sql-server-express-localdb-jdbc/","prefix":"2019-12-11"},"frontmatter":{"title":"SQL Server Express LocalDB via JDBC","author":"Anthony Attwood","category":"databases","cover":{"childImageSharp":{"resize":{"src":"/static/fbf87589c7938bbbe70db1c447bab332/c83a6/jan-kolar-vui-designer-lRoX0shwjUQ-unsplash.jpg"}}}}},"authornote":{"id":"6d7e2776-f5bf-5717-9502-2abc45ca50f5","html":"<p><strong>Anthony Attwood</strong> Iâ€™m a consultant software engineer living and working in Perth, Australia, building solutions that solve real problems for customers.</p>"},"site":{"siteMetadata":{"facebook":{"appId":""}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/sql-server-express-localdb-jdbc/","prev":{"id":"0f76618b-a8e9-51d7-94c7-3d96b53510d6","fields":{"slug":"/azure-for-automators/","prefix":"2019-12-10","source":"posts"},"frontmatter":{"title":"Azure for automators","category":"azure"}},"next":{"id":"cd400aa1-b4e1-5b93-bc2f-4101c9d34375","fields":{"slug":"/azure-ad-and-the-unvalidatable-access-token/","prefix":"2020-02-25","source":"posts"},"frontmatter":{"title":"Azure AD and the Un-validatable Access Token","category":"authentication"}},"source":"posts"}}}