{"componentChunkName":"component---src-templates-post-template-js","path":"/visualising-hangfire-job-stats-in-powerbi/","result":{"data":{"post":{"id":"26c84328-867a-596b-91e2-70a5ad51c145","html":"<p>At my day job, we run everything in Azure, which means we make heavy use of Application Insights and Power BI for collecting and visualising stats about our servers and applications.</p>\n<p>One of the not-Azure-specific parts we use is the excellent background job execution engine, Hangfire.</p>\n<p>Hangfire ships with its own admin dashboard that’s great for showing you what Hangfire’s doing, but since that’s not Power BI, I don’t get the Hangfire job stats in the same unified view of all our other servers and app. Nor does the Hangfire dashboard give you any historical information.</p>\n<p>I couldn’t figure an easy way to get the Hangfire stats into App Insights, so I set about making one.</p>\n<p>Getting the Hangfire job stats into Power BI involved a couple of steps;</p>\n<ol>\n<li>Figure out how to call the Hangfire dashboard <code class=\"language-text\">/stats/</code> endpoint to get the stats periodically.</li>\n<li>Write an Azure Function that polls the same <code class=\"language-text\">/stats/</code> endpoint and pushes the results into App Insights — I poll every minute, but faster would work too.</li>\n<li>Consume the stats into Power BI and visualise nicely.</li>\n<li>??</li>\n<li>$$ Profit!</li>\n</ol>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8bd66ac23cc4540dad09b7ca2ab7b3e4/f058b/design-overview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 630px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 90.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAACl0lEQVQ4y4VSXUsUURjeH9FFvyboH3QdXQRSetVdXYiQWHfZRUUGFoWGIloQhJQmJIJEBqGsppu7686Onp2Z3TM7X+ecOd+dmdHdgYJenjnznI/nPe9537fiOE6r1dK5KaXMSAhe+7weh0DjvWJFKVkQp+5Vvx7tb9Z8EJhpZXJycmz0NvCgi5QDw7NeCKNktxG4x1Po4IaHNfB6P6uHh3WLav1sbOH1naXnI3MfHq1n4i8bGxPj409fvDrqsmYXHbtJ2yc7HQXbM7h5f6fDj5xw3/Z/2f1aLO9em124tzJza355ajUTm8913Wq1Ogjb/KnSCNkpi7AoHqSlzLbePViduPp4/Mr05vy3TEwwhhCqzHSG/BDseqd2u9GoR1E4UDLGOgDUm7ZldzzXM4KK/pdRmoZRBH2fUjpYLMICEe0mWPCUMlZRhen/W369rvX4b1dSwgghlbLjMgZXlbWqO2ft3nQPRnS0dp6wfEchJglXmEmDJOUwSPox9iNkxiDGMAj9RPvV65uzld3FStJ6GPELMRcKU66kGHQFo5QbY0xwbsAoEVLj49H3Ty5vzV8SnWkkh2KJUialTIUwP+OicKPy+uUkcxr4e7b946T1HSe1mJbEhGU1xUKkMiMxZ8WW8UKlHHSBkuc5QFReJEzpvX5/1QNLwHrZbiyetd7YTcPfnp6sAGsZWNu+98kDWz1n2+9uQW/bdz8CcC4WUnkIn6LYTQmkFNI04CxkLOLMIdiMPqMGFkpM6fuMeZS0Y3QRtjR5Nh4UV8q8OUdGTMA8n/J8ak4YwvM0hIQPxaSU7XKJ1V+c5+2CUj4MOyIUM0aEwJKb9iNSZBAlLkXBzStMUiGmw5ujlGGeizk3MCRHmYuCGyWVoofpH7Ce7iug+fqDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"design overview\"\n        title=\"\"\n        src=\"/static/8bd66ac23cc4540dad09b7ca2ab7b3e4/f058b/design-overview.png\"\n        srcset=\"/static/8bd66ac23cc4540dad09b7ca2ab7b3e4/772e8/design-overview.png 200w,\n/static/8bd66ac23cc4540dad09b7ca2ab7b3e4/e17e5/design-overview.png 400w,\n/static/8bd66ac23cc4540dad09b7ca2ab7b3e4/f058b/design-overview.png 630w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<span class=\"caption\">Dataflow for getting Hangfire stats into PowerBI<span/></p>\n<h3>Step 1.</h3>\n<p>Looking at the network traffic in the browser, we can see that the browser calls <code class=\"language-text\">/stats/</code> like so;</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/27b08b698df2a89e6b0c8f28c4881439/59000/hangfire-dashboard.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 79.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACWUlEQVQoz5WTz0/UQBTHG/wbOYD8iKCRgxp3EYhGLx5MPHsx8eaZRZDEqCwrIcgKu6u7qCFEEHcLtMs6nelMZ6bTdlpfW0RFo/GbSTOd9z7f9zLtM4JMhGCEEPU4czBHyBOCeyAOklIGP0kpnzGmfAV7I8lk23an08EYJ/+jFI7jGKpQSsE3fdU6/rN0Eic8cCMd/oBz/p914iTN6Qkz0OqXyvp7tb945YeWtydD72xlMI7iSMepS/bUZ8i829Zx5dD7lDdyArsuYYQBDfsoDsMsDyx0ok+t87a5zyA578w47WeP7VXssiWsN731R7sPaUBzX7AALxGKffb5+dGzrz7CvpMjJ/DiwcL1t1fGN0euNiYm3127WBudahbmzRKSCOrZwrr38e5Ma3Jsc2imVby1NW3yzgkM3nc+3Dy/0X+5MTZeGxmrDQM8ujEwWO2/0Zy4v3N7ulUY3hy4UBu6lJ4PQmiHbaewlEpI2ejWK2b5lVleMZcr7aVVa2UDVeuo+nh76UFz8WXnxZq5vNIur3VX14/XXturXbcbqNB4/+XQsnvOMWEI/k1OkSepau+a9WqjVd/aP6CHvSgUUQh/JFVaxUmQBF6IHUIZNbrEklw6xMEukb7wRPoNp2amDMPoO9f3dGFORwq7GKKEQhJicNmwKPV9ZdjEFly4mWAGhBAAFwoFI9Pck/ko0ozCLKRzQiGHc6VUluwbJmpzTzgYw/odnp2dDYIQChGSVoPJE54HMEwbxsSwyBG0DU4Q9pUCHuBisZjDpVIpiiKIgincK/c4ZKggnUdo5hsgF1IFt92tLQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"hangfire dashboard\"\n        title=\"\"\n        src=\"/static/27b08b698df2a89e6b0c8f28c4881439/5a190/hangfire-dashboard.png\"\n        srcset=\"/static/27b08b698df2a89e6b0c8f28c4881439/772e8/hangfire-dashboard.png 200w,\n/static/27b08b698df2a89e6b0c8f28c4881439/e17e5/hangfire-dashboard.png 400w,\n/static/27b08b698df2a89e6b0c8f28c4881439/5a190/hangfire-dashboard.png 800w,\n/static/27b08b698df2a89e6b0c8f28c4881439/59000/hangfire-dashboard.png 917w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">POST https://{hangfire_server}/hangfire/stats\n\nContent-Type : application/x-www-form-urlencoded; charset=UTF-8\nBody : metrics[]=enqueued:count-or-null&amp;metrics[]=failed:count-or-null\n&amp;metrics[]=retries:count&amp;metrics[]=recurring:count\n&amp;metrics[]=servers:count&amp;metrics[]=succeeded:count&amp;metrics[]=failed:count\n&amp;metrics[]=succeeded:count</code></pre></div>\n<p>We’ve customised our Hangfire dashboard with a custom <code class=\"language-text\">IDashboardAuthorizationFilter</code> that uses cookies with 24hr session expiry, so I also had to figure out how to authenticate in a stateless manner. Since step 2 involves an Azure Function — which is stateless by design — I didn’t want to have to mess around with cookies if I could avoid it.</p>\n<p>Then use Postman (or your REST client of choice) to craft the simplest repeatable request that works for your situation.</p>\n<h3>Step 2.</h3>\n<p>Write a timer triggered Azure Function that POSTs to the <code class=\"language-text\">/stats/</code> endpoint, parses the result, and sends the data to App Insights. (I tried out <a href=\"https://flurl.dev/\">Flurl.Http</a> http client with its fluent API… very impressed)</p>\n<p>You can find the source on github, <a href=\"https://gist.github.com/tonesandtones/8f45ab89e90d4474b108a35898a0d636\">https://gist.github.com/tonesandtones/8f45ab89e90d4474b108a35898a0d636</a> (or the embed below)</p>\n<p>I used the <code class=\"language-text\">Microsoft.ApplicationInsights</code> package, which makes it really easy to post metrics to App Insights, just</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(new TelemetryClient).TrackMetric(“Metric Name”, metricValue)</code></pre></div>\n<p>They then show up in App Insights as CustomMetrics.</p>\n<p>I’m only interested in the Hangfire servers, succeeded, failed, and retry metrics, so they’re the only ones I publish into App Insights (apologies for the out-of-date-screenshot, I added the servers metric after I’d taken all the screenshots for this post)</p>\n<h3>Step 3.</h3>\n<p>Getting the data out of App Insights and into Power BI is a little awkward, but fairly easy. Once you’ve got your analytics query giving you the results you want, export it to an M-Query script, and import that script into Power BI as a Blank Query datasource. See <a href=\"https://docs.microsoft.com/en-us/azure/application-insights/app-insights-export-power-bi#export-analytics-queries\">https://docs.microsoft.com/en-us/azure/application-insights/app-insights-export-power-bi#export-analytics-queries</a></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6443eadc3115d5f19d827e880eea80e6/d4713/app-insights-query.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 531px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAACJ0lEQVQ4y41S2W7TUBC9HwhIgAS88MID/4aEeETAQ0sSx00i0jSFtt7v4nu9xWsSJykSy7FdgpqCYDQ6Httz5p45Nnn77v3sbPZpOqWMv3r95vmLl/cfPX3w+BmwzX1xmPcePiH9vjaf09PTue3YcRwrv4nVcrmsyqosq6JosM3l/hZYVeu6JkfH/aEW6/rFcKhNRqOpNphNxtbnL8pxFlEUMRpxEQsRS5moIPJoLPyIsUUYbjYbMjwZm2ZxZcaWZV1cXlqm6bhukiSr1aqu6/V6Xa+ba1vXN0/qm4Kczc+///i23W52u931NWD3tcFt/R9BxpNJnmWBCrBwGEVxFFKVRGlelsU/g3zURpaIKBeu6zqOK6V/bnoqTqtf5PzvQT4c9Wzq265nmKZl2+AbhoFBnue5TXi+L6VUUu7xd5ChroeBQhelLECEIT4VY6wtQ6UU5xwI40GObgfRT0bYlHEOAmhC+GBRSiVq34ftmIE+6M/S9FC2NtTRDbIHBmPQKZXq6k4LjIyTZLFI0yw7SKLpIAc4ttmSUgdkKW1cKHWbtb3mLeeYmN0JMmhPxo8NKtJtyU5LBrSrxekiLYryD+TjXp8LgW5YDb8Nw4TaK8OE7535jAsMEkI0P8HtJL3+AM6gqelsR8AzTOlqBsVcAKEOqx8kdj6BMhyODnTCJ9iLwzsOxsMseJXnRZblB9kYhm/Rus3AhEIVBLAKTIxwqac6w6S86/ZPHfB1H4puX30AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"AIQL for getting the stats out of App Insights\"\n        title=\"\"\n        src=\"/static/6443eadc3115d5f19d827e880eea80e6/d4713/app-insights-query.png\"\n        srcset=\"/static/6443eadc3115d5f19d827e880eea80e6/772e8/app-insights-query.png 200w,\n/static/6443eadc3115d5f19d827e880eea80e6/e17e5/app-insights-query.png 400w,\n/static/6443eadc3115d5f19d827e880eea80e6/d4713/app-insights-query.png 531w\"\n        sizes=\"(max-width: 531px) 100vw, 531px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<span class=\"caption\">AIQL for getting the stats out of App Insights</span></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/03420edfb18e0dc3525408dcea97c955/3cf3e/getting-the-m-query.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 293px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 48%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACCklEQVQoz3WQ7W/SUBTG+zcZsylzsAEbbw4HDBbmdDEaE/8mv/lNP6jJJLq38I6MFpC2MKArpaVdW9rSQkvB2IIXP2p8cnLu7+Se5z7Jhe6tbzqc3v2D5NrG9tHzlw6XN5p4GtiLOpyeYPjA5Q3ef+hac2xt7wSdbt9uaN/j3/M9jjjdfmCEHmx6XN5A7PB4Y2tnP37kBJfRhC8UCT6Jn7x6E44l3f6wJxAGYyiSiCdPYofPjl+83g1F1h+5oVbrptlsoRgOAEUxwBiGgzOdz6Uz5/lipoKUit9zhVIWMFK7bqAIXIPrDbzd7kD2wrZs27J+WYuFvVxaYFoufloWTnS7/VuSJimWIpkeOVgVN+RkmecFTjdMy7IgAqlSTZxhmFukRlzDZK3eQzHyBzokSI3qa+JwpqgSzSg9SqMHI46XtLExNSeTiWEYkCyKiiQpQOJQGgwUQVA0TS4UmE8f2I/v+a+nQvqcPfsySH1mz06HV9/kclGU7jRNM00Tms5mU9OcAoEO2DCmtm1eXlTyl2WsUkXyMFapNJFqF4Vx+KZR5t+9Jdt1RR2tko2/pOvGfG50OlIqpWbS41zWKBVXkL5Ss5lJqWh3O7P5bDwe/0n+V+CF+ZyjGZ6m2T4t9uk7ghB7Pa5HsYIwWyxBxP/NwK7riqqCn5AVBXRJHUmjVcmSJPC8KIq6roO130b8zGk5UmzeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"Getting the MQuery text out of App Insights\"\n        title=\"\"\n        src=\"/static/03420edfb18e0dc3525408dcea97c955/3cf3e/getting-the-m-query.png\"\n        srcset=\"/static/03420edfb18e0dc3525408dcea97c955/772e8/getting-the-m-query.png 200w,\n/static/03420edfb18e0dc3525408dcea97c955/3cf3e/getting-the-m-query.png 293w\"\n        sizes=\"(max-width: 293px) 100vw, 293px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<span class=\"caption\">Getting the MQuery text out of App Insights</span></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bc87bb9f551c398bef4c87df2a4b9881/160a3/adding-the-query-to-powerbi.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 682px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 38.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABcUlEQVQY022RX0vCUBjGz5frG3TTJ5AuDJpg5jIvjP6AhWBeVRdaZBChcw2X25yaXnmxC1Fzuokpkc5t/oN0De11QgT2uzjnfd7zPOfAe1Cz2azX64Ig1JaIsiyDrFbfKtVqY4XUkCQZdujDKoqiJElL2ZDQ2emJ1+t5JonRQFOUbk9RdF1vt9+Hw6FhfK/4LUzTNFbCNOfzOdp14LZt7OGRVAfGx6euahqEx+MRmMC6WCzAOZ3OVklgNpsZ1gVwhCLBzWv/Bn2/Vc7YhOxxIHDhduMODAuFQn6/3+c7Cocj0Wj01uLuDyARFQu+MlccdcmS52zyhqLIRIJIEESxWCzkCxzHJWna4cDsdvvOGugpRjFcPknz9EuOYXM1Uex0Ot1ubzyZfFnA5DyeQ5fLtb8GShDxbIZPp+ENlufTlUoZhtlqtZS+hdovlUo4fuB0OvfWQPF4DJJMikmlUizLlsvLMPwfxDRNU1UVOjiO/xv+AQgfYVV3WDoCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"...and in to PowerBI\"\n        title=\"\"\n        src=\"/static/bc87bb9f551c398bef4c87df2a4b9881/160a3/adding-the-query-to-powerbi.png\"\n        srcset=\"/static/bc87bb9f551c398bef4c87df2a4b9881/772e8/adding-the-query-to-powerbi.png 200w,\n/static/bc87bb9f551c398bef4c87df2a4b9881/e17e5/adding-the-query-to-powerbi.png 400w,\n/static/bc87bb9f551c398bef4c87df2a4b9881/160a3/adding-the-query-to-powerbi.png 682w\"\n        sizes=\"(max-width: 682px) 100vw, 682px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<span class=\"caption\">…and in to PowerBI</span></p>\n<p>In my visualisation, I’m after a plot of the number of jobs that succeed and fail at each point in time (whatever my bin size ends up being). Unfortunately the Hangfire <code class=\"language-text\">/stats/</code> endpoint only tells you the current total of succeeded and failed jobs each time you call it, so I have a couple of requirements for the data manipulation in Power BI;</p>\n<ul>\n<li>calculate the delta of failed/succeeded jobs between subsequent calls, and</li>\n<li>be able to get the total jobs that succeeded/failed in, say, 15 minute bins, or any bin size we choose.</li>\n</ul>\n<p>Note that the <code class=\"language-text\">Retries</code> metric is only the number of jobs being retried at the instant the stats are gathered, so we don’t need the delta for that metric. It’s also not particularly accurate, but it’s enough to show up any persistent errors that need attention. Ditto for <code class=\"language-text\">Servers</code>, since that’s the count of servers Hangfire thinks are active at any given moment.</p>\n<p>Since I get the results out of App Insights in a single query, I needed to do the following steps to get the data in the form I need;</p>\n<ul>\n<li>Split the one table from App Insights into 3 tables, one for each metric name,</li>\n<li>For the succeeded and failed metrics, use this Power BI community post <a href=\"https://community.powerbi.com/t5/Desktop/Calculate-Difference-Between-Latest-Date-and-Previous-Date/m-p/179532\">https://community.powerbi.com/t5/Desktop/Calculate-Difference-Between-Latest-Date-and-Previous-Date/m-p/179532</a> to calculate the delta between each row and the previous.)</li>\n<li>Add calculated rows to convert the UTC timestamps into my local timezone — because Power BI’s handling of timezones is pretty abysmal at the moment</li>\n<li>Finally, create groupings from the timestamps to produce 15 minute bins</li>\n</ul>\n<p>(No doubt someone with better Power BI skills than mine could do a better job, but this approach works for my purposes)</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/907bff685412c5c391006b21f83f708e/065e2/stats-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 577px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzUlEQVQI1x2My6qDMBiEff/nEOpdUxNrYs5K30GqkkTjDVERbD3b/u23GIZhZgyEkOu6pmnatu24/s1yLOsGhGHgOLbneRGK7kEIpQRFcXxP0wdjlDFGCDYopb7vB+EXgjHPvnCeFUWR5/kf55SmMcYkISmlUYQgzzKWJA/4NYa+77Qex7FVal3X8zyP47iu6/V+g0Iipeo6PQx927bTNP1fFyh4IaUhhajrWgjxfFZa62VZ5nneNlhtAGyqqmqaRvxqUsp935VS4Muy/ACJUb9pjVBJZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"stats 1\"\n        title=\"\"\n        src=\"/static/907bff685412c5c391006b21f83f708e/065e2/stats-1.png\"\n        srcset=\"/static/907bff685412c5c391006b21f83f708e/772e8/stats-1.png 200w,\n/static/907bff685412c5c391006b21f83f708e/e17e5/stats-1.png 400w,\n/static/907bff685412c5c391006b21f83f708e/065e2/stats-1.png 577w\"\n        sizes=\"(max-width: 577px) 100vw, 577px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5684e8cc1446cb4aa450972426a1e23e/3c5de/stats-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 472px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABF0lEQVQY0yVPy5KCMBDk192LW1S5cNkgllz8HjhoWMAkQII8NkFe60GP22pXUjXV0z3TY223W9dxVqsP13Ft215/roP93nGcIAiIRzzPQ03It+/7m68NyMPhQAjxdzuILW1013XG9L0xbdsOw/B4PO73+zRNTdO0LVq6++1Qaa3B325/dX3R2nDOLSF4mgApOzN6opzxcRyNMZf6krz4c5bhZSl+Ng4DRsRxzBgLw9CqKpW/oKTEsKqqsPN6HRBH5EKIvASKAoKiKNDq+x4yKeXxeHqbwZdKKqxVSk3TjPAw57lAB7qXvSilfJsRFjJKqYUxafrMxBk7HSk2LMsCc13XSfKTpBnOeSbOzsA8z7goppRxHkXRP6FEKkcSzYl+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"stats 2\"\n        title=\"\"\n        src=\"/static/5684e8cc1446cb4aa450972426a1e23e/3c5de/stats-2.png\"\n        srcset=\"/static/5684e8cc1446cb4aa450972426a1e23e/772e8/stats-2.png 200w,\n/static/5684e8cc1446cb4aa450972426a1e23e/e17e5/stats-2.png 400w,\n/static/5684e8cc1446cb4aa450972426a1e23e/3c5de/stats-2.png 472w\"\n        sizes=\"(max-width: 472px) 100vw, 472px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c8f730c199267cd8f9449f256f639da/b1665/stats-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 589px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 25.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA8UlEQVQY0x2Oy26EIBiFff8H0ZRBB7zVauNt4Tt4QQQhOkO1Lmrisv/MWZAT+L4TLN/3Mca2bSP0gdDt5t4dx0EIeZ7ruvCCCaURJQHGMbmHlCZfSfadQeI4ttI09TyPEAIrLnaTJAmCsKqqsiybpsnzHLgo/gyjKM0ySmld10VRgOkHgaWVkvOstRZCKqUfj+e6rtd1/b2z/+5SymkSWishhFLqPE9jnpxzgC0+jn0/jOx1MsYABWjfd2PMtm3LsjA2QMaR9cMLgEuY6LoOusU5aD0QbdtCmeU8TdNxHD/GwMT6klnX9yAP74AMvwAZ+j+LK/QltPVKsAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"stats 3\"\n        title=\"\"\n        src=\"/static/8c8f730c199267cd8f9449f256f639da/b1665/stats-3.png\"\n        srcset=\"/static/8c8f730c199267cd8f9449f256f639da/772e8/stats-3.png 200w,\n/static/8c8f730c199267cd8f9449f256f639da/e17e5/stats-3.png 400w,\n/static/8c8f730c199267cd8f9449f256f639da/b1665/stats-3.png 589w\"\n        sizes=\"(max-width: 589px) 100vw, 589px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><div id=\"gist85659341\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-rowindexandvaluechange\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-text  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-rowindexandvaluechange-LC1\" class=\"blob-code blob-code-inner js-file-line\">--2018-07-18 Updated to use new RANKX function to deal with duplicate timestamp values.</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-rowindexandvaluechange-LC2\" class=\"blob-code blob-code-inner js-file-line\">--</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-rowindexandvaluechange-LC3\" class=\"blob-code blob-code-inner js-file-line\">--When there are duplicate timestamp values in the dataset, using the previous method (with EARLIER()) would create</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-rowindexandvaluechange-LC4\" class=\"blob-code blob-code-inner js-file-line\">--index values that run, eg, 122, 123, 123, 125, 126.</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-rowindexandvaluechange-LC5\" class=\"blob-code blob-code-inner js-file-line\">--Supposing therer were 100 new items per row, and ~5000 total (so total would run 4900, 5000, 5100, 5200, etc),</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-rowindexandvaluechange-LC6\" class=\"blob-code blob-code-inner js-file-line\">--the ValueChange would run 100, 100, 5000(!!), 100, 100.</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-rowindexandvaluechange-LC7\" class=\"blob-code blob-code-inner js-file-line\">--Now, using a RANKX() with Dense enumeration (https://msdn.microsoft.com/en-us/query-bi/dax/rankx-function-dax),</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-rowindexandvaluechange-LC8\" class=\"blob-code blob-code-inner js-file-line\">--we can get dense indices that don&#39;t skip, so we can lookup Index-1 and know it always exists.</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-rowindexandvaluechange-LC9\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-rowindexandvaluechange-LC10\" class=\"blob-code blob-code-inner js-file-line\">------------------------------------------</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-rowindexandvaluechange-LC11\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-rowindexandvaluechange-LC12\" class=\"blob-code blob-code-inner js-file-line\">--must be DENSE rank so we can lookup value(rank+1) and not get missing values</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-rowindexandvaluechange-LC13\" class=\"blob-code blob-code-inner js-file-line\">Index = RANKX(HangfireSuceeded, HangfireSuceeded[timestamp], HangfireSuceeded[timestamp], ASC, Dense)</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-rowindexandvaluechange-LC14\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-rowindexandvaluechange-LC15\" class=\"blob-code blob-code-inner js-file-line\">--Now with dense rank, HangfireSuceeded[Index]-1 is guaranteed to exist</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-rowindexandvaluechange-LC16\" class=\"blob-code blob-code-inner js-file-line\">Value Change = </td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-rowindexandvaluechange-LC17\" class=\"blob-code blob-code-inner js-file-line\">   IF (</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-rowindexandvaluechange-LC18\" class=\"blob-code blob-code-inner js-file-line\">    HangfireSuceeded[Index] = 1,</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-rowindexandvaluechange-LC19\" class=\"blob-code blob-code-inner js-file-line\">    0,</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-rowindexandvaluechange-LC20\" class=\"blob-code blob-code-inner js-file-line\">    HangfireSuceeded[value] - LOOKUPVALUE(HangfireSuceeded[value], HangfireSuceeded[Index], HangfireSuceeded[Index]-1)</td>\n      </tr>\n      <tr>\n        <td id=\"file-rowindexandvaluechange-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-rowindexandvaluechange-LC21\" class=\"blob-code blob-code-inner js-file-line\">)</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/tonesandtones/0525b74d8a622c4644c34dbe33274268/raw/9d0cc84bc7cdc563185f545846c17e72490c9922/RowIndexAndValueChange\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/tonesandtones/0525b74d8a622c4644c34dbe33274268#file-rowindexandvaluechange\">RowIndexAndValueChange</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Once all that’s in place, drag and drop the 4 metrics onto 4 line graphs (pick the graph type of your choice — bar graphs would work too). With the 15 minute bins, I can choose from 1 minute (source) or 15 minute (binned) resolution. On the graphs with 1 minute resolution, I also added a filter to pick just the last 1440 minutes (24 hours) of data.</p>\n<p>We use Power BI Pro, so it was then a simple matter of publishing the report to our Power BI instance, and setting up a refresh schedule to have Power BI refresh the data every hour.</p>\n<h3>The finished product</h3>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/42af2f507b4202c696df7a007c9298f1/7161f/data-24hrs.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 57.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABbUlEQVQoz41STUvDQBDdH6y3HrwpHtSj4N/wKAoVQYUiKmq1ta1VS0FrYpI2n5tudncmTrJaEj/AYVjee/s27OYNyyultQ7DMI7jNE1p5ZwbEEURASEEGap+ppRaSIgopTSKKouAUQCAMBlqh6Es/CqjClLymm/x9aqToZHqJq4VVDTah7K/HzZ7dK0MIJBZqnWkpCVSuiLhWClj+HmF4vD2+GFr1N987q0Mbhv99nLveql31Ri0N57u14ad9cfuzvix6do3oX/ue2e+24mCXetlddgdpQk78uwDe3Lq2SdTp+W71BcztxPOjonO3LsoaHnvTeetSTbX2nMm+/broWNdBtNQSZbjLz/mn8XmAPQ2riSt1PMCq5TaUCgo/6S0qkRJXoAiN0bxQT1ApJwA/qJVM5OUPmKGEGupESSCzpEUhWCaBqhKoaRko0FgNA9cyjgTidaUlgDkWcZlRkCU+SVCkCHDgoqS0qNEOVgfmqmynps51oQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"data 24hrs\"\n        title=\"\"\n        src=\"/static/42af2f507b4202c696df7a007c9298f1/5a190/data-24hrs.png\"\n        srcset=\"/static/42af2f507b4202c696df7a007c9298f1/772e8/data-24hrs.png 200w,\n/static/42af2f507b4202c696df7a007c9298f1/e17e5/data-24hrs.png 400w,\n/static/42af2f507b4202c696df7a007c9298f1/5a190/data-24hrs.png 800w,\n/static/42af2f507b4202c696df7a007c9298f1/7161f/data-24hrs.png 1182w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<span class=\"caption\">24 Hours of data at 1 minute resolution</span></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e22d19d14cf0d37e67b64b9299cb36f1/7321b/data-7d.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABZUlEQVQoz01S2U7EMAzM/38SH4AE4gkE0kqIQ0IsbLe76ZHTR5mkB7WsaDx13LEdk1aLMXrvT6dT27bW2ku1tlrTNGC6rgshxJ0ZriYi0zSp6hwCqCz2z6hOO8MnM+k05+0/IJfmctVhCLerWyHT5uSYgZoUB84/MXjmKAJ+zrtWcM4RFQeikWj7hzmM3VdwjummOd5emrvr+am3QfjBtoexf3PDy2CTyHNvH3v76oZ726J6T3lkMigwMH1HjxOOMIh8evfuxyvlrvqHd78pemGtHQFDIIAhTCNnrZ1r1S+EBqWMrCoEj5zS/Do2XpWbSDnknFBBBE67c3PagQ1ruSwciMrJ5CvwKMdzmGu456nwufDQaqAtp6RSFqvzenDOK13DheflLei6VxOZMcwiWxVigLMWxzCPMSxh1TkyY1UlTTXVh2GgcAgBvx5TgoNFGIkc5caNyHMpwXHZhoCNosehFsXlP2PFvaCOMFDYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"data 7d\"\n        title=\"\"\n        src=\"/static/e22d19d14cf0d37e67b64b9299cb36f1/5a190/data-7d.png\"\n        srcset=\"/static/e22d19d14cf0d37e67b64b9299cb36f1/772e8/data-7d.png 200w,\n/static/e22d19d14cf0d37e67b64b9299cb36f1/e17e5/data-7d.png 400w,\n/static/e22d19d14cf0d37e67b64b9299cb36f1/5a190/data-7d.png 800w,\n/static/e22d19d14cf0d37e67b64b9299cb36f1/7321b/data-7d.png 1184w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<span class=\"caption\">And 7 days of data at 15 minute resolution</span></p>\n<p>(Again, sorry for the out of date screenshots, I added the <code class=\"language-text\">servers</code> metric as another line graph at the bottom after they were taken)</p>\n<h3>Source code</h3>\n<p>(<a href=\"https://gist.github.com/tonesandtones/8f45ab89e90d4474b108a35898a0d636\">https://gist.github.com/tonesandtones/8f45ab89e90d4474b108a35898a0d636</a>)</p>\n<p>(You don’t need to point out how gross this code is, this whole process is the product of a couple of hours on a Friday afternoon — it ain’t pretty , but it works ;-) )</p>\n<p><div id=\"gist85658409\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-hangfirestatscollector-cs\" class=\"file my-2\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-c  \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Collections</span>.<span class=\"pl-en\">Generic</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Configuration</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Globalization</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Net</span>.<span class=\"pl-en\">Http</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Text</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Threading</span>.<span class=\"pl-en\">Tasks</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">Microsoft</span>.<span class=\"pl-en\">Azure</span>.<span class=\"pl-en\">WebJobs</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">Microsoft</span>.<span class=\"pl-en\">Azure</span>.<span class=\"pl-en\">WebJobs</span>.<span class=\"pl-en\">Host</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">Flurl</span>.<span class=\"pl-en\">Http</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">Microsoft</span>.<span class=\"pl-en\">ApplicationInsights</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">Microsoft</span>.<span class=\"pl-en\">ApplicationInsights</span>.<span class=\"pl-en\">Extensibility</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">Newtonsoft</span>.<span class=\"pl-en\">Json</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC14\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC15\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">namespace</span> <span class=\"pl-en\">HangfireStatsCollector</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC16\" class=\"blob-code blob-code-inner js-file-line\">{</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC17\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">class</span> <span class=\"pl-en\">HangfireStatsCollector</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC18\" class=\"blob-code blob-code-inner js-file-line\">    {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC19\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">private</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">readonly</span> <span class=\"pl-k\">string</span> <span class=\"pl-smi\">key</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC20\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">private</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">readonly</span> <span class=\"pl-en\">TelemetryClient</span> <span class=\"pl-smi\">telemetry</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC21\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC22\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">static</span> <span class=\"pl-en\">HangfireStatsCollector</span>()</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC23\" class=\"blob-code blob-code-inner js-file-line\">        {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC24\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">key</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">ConfigurationManager</span>.<span class=\"pl-smi\">AppSettings</span>[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>HangfireMetricsAppInsightsSinkKey<span class=\"pl-pds\">&quot;</span></span>];</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC25\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if</span> (<span class=\"pl-k\">!</span><span class=\"pl-smi\">string</span>.<span class=\"pl-en\">IsNullOrEmpty</span>(<span class=\"pl-smi\">key</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC26\" class=\"blob-code blob-code-inner js-file-line\">            {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC27\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-smi\">TelemetryConfiguration</span>.<span class=\"pl-smi\">Active</span>.<span class=\"pl-smi\">InstrumentationKey</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">key</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L28\" class=\"blob-num js-line-number\" data-line-number=\"28\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC28\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-smi\">telemetry</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-en\">TelemetryClient</span>() { <span class=\"pl-smi\">InstrumentationKey</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">key</span> };</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L29\" class=\"blob-num js-line-number\" data-line-number=\"29\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC29\" class=\"blob-code blob-code-inner js-file-line\">            }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L30\" class=\"blob-num js-line-number\" data-line-number=\"30\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC30\" class=\"blob-code blob-code-inner js-file-line\">        }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L31\" class=\"blob-num js-line-number\" data-line-number=\"31\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC31\" class=\"blob-code blob-code-inner js-file-line\">        </td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L32\" class=\"blob-num js-line-number\" data-line-number=\"32\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC32\" class=\"blob-code blob-code-inner js-file-line\">        [<span class=\"pl-en\">FunctionName</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>HangfireStatsCollector<span class=\"pl-pds\">&quot;</span></span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L33\" class=\"blob-num js-line-number\" data-line-number=\"33\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC33\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">async</span> <span class=\"pl-en\">Task</span> <span class=\"pl-en\">Run</span>(</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L34\" class=\"blob-num js-line-number\" data-line-number=\"34\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC34\" class=\"blob-code blob-code-inner js-file-line\">            [<span class=\"pl-en\">TimerTrigger</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>0 */1 * * * *<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-en\">RunOnStartup</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">true</span>)] <span class=\"pl-en\">TimerInfo</span> <span class=\"pl-smi\">myTimer</span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L35\" class=\"blob-num js-line-number\" data-line-number=\"35\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC35\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-en\">TraceWriter</span> <span class=\"pl-smi\">log</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L36\" class=\"blob-num js-line-number\" data-line-number=\"36\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC36\" class=\"blob-code blob-code-inner js-file-line\">        {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L37\" class=\"blob-num js-line-number\" data-line-number=\"37\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC37\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">log</span>.<span class=\"pl-en\">Info</span>(<span class=\"pl-s\"><span class=\"pl-pds\">$&quot;</span>C# Timer trigger function executed at: {<span class=\"pl-smi\">DateTime</span>.<span class=\"pl-smi\">Now</span>}<span class=\"pl-pds\">&quot;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L38\" class=\"blob-num js-line-number\" data-line-number=\"38\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC38\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L39\" class=\"blob-num js-line-number\" data-line-number=\"39\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC39\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">telemetry</span> <span class=\"pl-k\">==</span> <span class=\"pl-c1\">null</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L40\" class=\"blob-num js-line-number\" data-line-number=\"40\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC40\" class=\"blob-code blob-code-inner js-file-line\">            {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L41\" class=\"blob-num js-line-number\" data-line-number=\"41\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC41\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-smi\">log</span>.<span class=\"pl-en\">Error</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>No App Insights instrumentation key available. Cannot publish metrics.<span class=\"pl-pds\">&quot;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L42\" class=\"blob-num js-line-number\" data-line-number=\"42\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC42\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-k\">return</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L43\" class=\"blob-num js-line-number\" data-line-number=\"43\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC43\" class=\"blob-code blob-code-inner js-file-line\">            }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L44\" class=\"blob-num js-line-number\" data-line-number=\"44\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC44\" class=\"blob-code blob-code-inner js-file-line\">            </td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L45\" class=\"blob-num js-line-number\" data-line-number=\"45\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC45\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-en\">IList</span>&lt;<span class=\"pl-k\">string</span>&gt; <span class=\"pl-smi\">paramsToFetch</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-en\">List</span>&lt;<span class=\"pl-k\">string</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L46\" class=\"blob-num js-line-number\" data-line-number=\"46\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC46\" class=\"blob-code blob-code-inner js-file-line\">            {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L47\" class=\"blob-num js-line-number\" data-line-number=\"47\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC47\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>enqueued:count-or-null<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L48\" class=\"blob-num js-line-number\" data-line-number=\"48\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC48\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>retries:count<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L49\" class=\"blob-num js-line-number\" data-line-number=\"49\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC49\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>recurring:count<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L50\" class=\"blob-num js-line-number\" data-line-number=\"50\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC50\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>servers:count<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L51\" class=\"blob-num js-line-number\" data-line-number=\"51\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC51\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>succeeded:count<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L52\" class=\"blob-num js-line-number\" data-line-number=\"52\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC52\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>failed:count<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L53\" class=\"blob-num js-line-number\" data-line-number=\"53\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC53\" class=\"blob-code blob-code-inner js-file-line\">            };</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L54\" class=\"blob-num js-line-number\" data-line-number=\"54\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC54\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L55\" class=\"blob-num js-line-number\" data-line-number=\"55\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC55\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">string</span> <span class=\"pl-smi\">ps</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>metrics[]=<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> <span class=\"pl-smi\">string</span>.<span class=\"pl-en\">Join</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>&amp;metrics[]=<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-smi\">paramsToFetch</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L56\" class=\"blob-num js-line-number\" data-line-number=\"56\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC56\" class=\"blob-code blob-code-inner js-file-line\">            </td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L57\" class=\"blob-num js-line-number\" data-line-number=\"57\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC57\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">string</span> <span class=\"pl-smi\">statsUrl</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">ConfigurationManager</span>.<span class=\"pl-smi\">AppSettings</span>[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>HangfireStatsUrl<span class=\"pl-pds\">&quot;</span></span>];</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L58\" class=\"blob-num js-line-number\" data-line-number=\"58\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC58\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">string</span>.<span class=\"pl-en\">IsNullOrEmpty</span>(<span class=\"pl-smi\">statsUrl</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L59\" class=\"blob-num js-line-number\" data-line-number=\"59\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC59\" class=\"blob-code blob-code-inner js-file-line\">            {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L60\" class=\"blob-num js-line-number\" data-line-number=\"60\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC60\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-smi\">log</span>.<span class=\"pl-en\">Error</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>No Hangfire stats target URL specified. Cannot fetch metrics<span class=\"pl-pds\">&quot;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L61\" class=\"blob-num js-line-number\" data-line-number=\"61\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC61\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-k\">return</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L62\" class=\"blob-num js-line-number\" data-line-number=\"62\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC62\" class=\"blob-code blob-code-inner js-file-line\">            }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L63\" class=\"blob-num js-line-number\" data-line-number=\"63\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC63\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L64\" class=\"blob-num js-line-number\" data-line-number=\"64\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC64\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-en\">HangfireStatsWrapper</span> <span class=\"pl-smi\">stats</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L65\" class=\"blob-num js-line-number\" data-line-number=\"65\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC65\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">try</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L66\" class=\"blob-num js-line-number\" data-line-number=\"66\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC66\" class=\"blob-code blob-code-inner js-file-line\">            {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L67\" class=\"blob-num js-line-number\" data-line-number=\"67\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC67\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-smi\">stats</span> <span class=\"pl-k\">=</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L68\" class=\"blob-num js-line-number\" data-line-number=\"68\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC68\" class=\"blob-code blob-code-inner js-file-line\">                    <span class=\"pl-k\">await</span> <span class=\"pl-smi\">statsUrl</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L69\" class=\"blob-num js-line-number\" data-line-number=\"69\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC69\" class=\"blob-code blob-code-inner js-file-line\">                        .<span class=\"pl-en\">PostAsync</span>(</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L70\" class=\"blob-num js-line-number\" data-line-number=\"70\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC70\" class=\"blob-code blob-code-inner js-file-line\">                            <span class=\"pl-k\">new</span> <span class=\"pl-en\">StringContent</span>(<span class=\"pl-smi\">ps</span>, <span class=\"pl-smi\">Encoding</span>.<span class=\"pl-smi\">UTF8</span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>application/x-www-form-urlencoded<span class=\"pl-pds\">&quot;</span></span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L71\" class=\"blob-num js-line-number\" data-line-number=\"71\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC71\" class=\"blob-code blob-code-inner js-file-line\">                        .<span class=\"pl-en\">ReceiveJson</span>&lt;<span class=\"pl-en\">HangfireStatsWrapper</span>&gt;();</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L72\" class=\"blob-num js-line-number\" data-line-number=\"72\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC72\" class=\"blob-code blob-code-inner js-file-line\">            }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L73\" class=\"blob-num js-line-number\" data-line-number=\"73\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC73\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">catch</span> (<span class=\"pl-en\">Exception</span> <span class=\"pl-smi\">e</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L74\" class=\"blob-num js-line-number\" data-line-number=\"74\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC74\" class=\"blob-code blob-code-inner js-file-line\">            {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L75\" class=\"blob-num js-line-number\" data-line-number=\"75\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC75\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-smi\">log</span>.<span class=\"pl-en\">Error</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Unexpected exception<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-smi\">e</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L76\" class=\"blob-num js-line-number\" data-line-number=\"76\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC76\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-smi\">telemetry</span>.<span class=\"pl-en\">TrackException</span>(<span class=\"pl-smi\">e</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L77\" class=\"blob-num js-line-number\" data-line-number=\"77\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC77\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-k\">throw</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L78\" class=\"blob-num js-line-number\" data-line-number=\"78\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC78\" class=\"blob-code blob-code-inner js-file-line\">            }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L79\" class=\"blob-num js-line-number\" data-line-number=\"79\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC79\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L80\" class=\"blob-num js-line-number\" data-line-number=\"80\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC80\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">log</span>.<span class=\"pl-en\">Info</span>(<span class=\"pl-s\"><span class=\"pl-pds\">$&quot;</span>Got Hangfire stats: Succeeded = {<span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Succeeded</span>.<span class=\"pl-smi\">Value</span>}, Retries = {<span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Retries</span>.<span class=\"pl-smi\">Value</span>}, Failed = {<span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Failed</span>.<span class=\"pl-smi\">Value</span>}<span class=\"pl-pds\">&quot;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L81\" class=\"blob-num js-line-number\" data-line-number=\"81\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC81\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L82\" class=\"blob-num js-line-number\" data-line-number=\"82\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC82\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Retries</span>.<span class=\"pl-smi\">ValueInt</span>.<span class=\"pl-smi\">HasValue</span>) <span class=\"pl-smi\">telemetry</span>.<span class=\"pl-en\">TrackMetric</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Hangfire-Retries<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Retries</span>.<span class=\"pl-smi\">ValueInt</span>.<span class=\"pl-smi\">Value</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L83\" class=\"blob-num js-line-number\" data-line-number=\"83\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC83\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Succeeded</span>.<span class=\"pl-smi\">ValueInt</span>.<span class=\"pl-smi\">HasValue</span>) <span class=\"pl-smi\">telemetry</span>.<span class=\"pl-en\">TrackMetric</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Hangfire-Succeeded<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Succeeded</span>.<span class=\"pl-smi\">ValueInt</span>.<span class=\"pl-smi\">Value</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L84\" class=\"blob-num js-line-number\" data-line-number=\"84\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC84\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Failed</span>.<span class=\"pl-smi\">ValueInt</span>.<span class=\"pl-smi\">HasValue</span>) <span class=\"pl-smi\">telemetry</span>.<span class=\"pl-en\">TrackMetric</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Hangfire-Failed<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Failed</span>.<span class=\"pl-smi\">ValueInt</span>.<span class=\"pl-smi\">Value</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L85\" class=\"blob-num js-line-number\" data-line-number=\"85\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC85\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Servers</span>.<span class=\"pl-smi\">ValueInt</span>.<span class=\"pl-smi\">HasValue</span>) <span class=\"pl-smi\">telemetry</span>.<span class=\"pl-en\">TrackMetric</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Hangfire-Servers<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-smi\">stats</span>.<span class=\"pl-smi\">Servers</span>.<span class=\"pl-smi\">ValueInt</span>.<span class=\"pl-smi\">Value</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L86\" class=\"blob-num js-line-number\" data-line-number=\"86\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC86\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">telemetry</span>.<span class=\"pl-en\">Flush</span>();</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L87\" class=\"blob-num js-line-number\" data-line-number=\"87\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC87\" class=\"blob-code blob-code-inner js-file-line\">        }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L88\" class=\"blob-num js-line-number\" data-line-number=\"88\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC88\" class=\"blob-code blob-code-inner js-file-line\">    }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L89\" class=\"blob-num js-line-number\" data-line-number=\"89\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC89\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L90\" class=\"blob-num js-line-number\" data-line-number=\"90\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC90\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-en\">HangfireStatsWrapper</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L91\" class=\"blob-num js-line-number\" data-line-number=\"91\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC91\" class=\"blob-code blob-code-inner js-file-line\">    {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L92\" class=\"blob-num js-line-number\" data-line-number=\"92\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC92\" class=\"blob-code blob-code-inner js-file-line\">        [<span class=\"pl-en\">JsonProperty</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>enqueued:count-or-null<span class=\"pl-pds\">&quot;</span></span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L93\" class=\"blob-num js-line-number\" data-line-number=\"93\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC93\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-en\">HangfireStat</span> <span class=\"pl-smi\">Enqueued</span> { <span class=\"pl-k\">get</span>; <span class=\"pl-k\">set</span>; }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L94\" class=\"blob-num js-line-number\" data-line-number=\"94\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC94\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L95\" class=\"blob-num js-line-number\" data-line-number=\"95\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC95\" class=\"blob-code blob-code-inner js-file-line\">        [<span class=\"pl-en\">JsonProperty</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>retries:count<span class=\"pl-pds\">&quot;</span></span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L96\" class=\"blob-num js-line-number\" data-line-number=\"96\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC96\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-en\">HangfireStat</span> <span class=\"pl-smi\">Retries</span> { <span class=\"pl-k\">get</span>; <span class=\"pl-k\">set</span>; }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L97\" class=\"blob-num js-line-number\" data-line-number=\"97\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC97\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L98\" class=\"blob-num js-line-number\" data-line-number=\"98\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC98\" class=\"blob-code blob-code-inner js-file-line\">        [<span class=\"pl-en\">JsonProperty</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>recurring:count<span class=\"pl-pds\">&quot;</span></span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L99\" class=\"blob-num js-line-number\" data-line-number=\"99\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC99\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-en\">HangfireStat</span> <span class=\"pl-smi\">Recurring</span> { <span class=\"pl-k\">get</span>; <span class=\"pl-k\">set</span>; }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L100\" class=\"blob-num js-line-number\" data-line-number=\"100\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC100\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L101\" class=\"blob-num js-line-number\" data-line-number=\"101\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC101\" class=\"blob-code blob-code-inner js-file-line\">        [<span class=\"pl-en\">JsonProperty</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>servers:count<span class=\"pl-pds\">&quot;</span></span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L102\" class=\"blob-num js-line-number\" data-line-number=\"102\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC102\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-en\">HangfireStat</span> <span class=\"pl-smi\">Servers</span> { <span class=\"pl-k\">get</span>; <span class=\"pl-k\">set</span>; }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L103\" class=\"blob-num js-line-number\" data-line-number=\"103\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC103\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L104\" class=\"blob-num js-line-number\" data-line-number=\"104\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC104\" class=\"blob-code blob-code-inner js-file-line\">        [<span class=\"pl-en\">JsonProperty</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>succeeded:count<span class=\"pl-pds\">&quot;</span></span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L105\" class=\"blob-num js-line-number\" data-line-number=\"105\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC105\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-en\">HangfireStat</span> <span class=\"pl-smi\">Succeeded</span> { <span class=\"pl-k\">get</span>; <span class=\"pl-k\">set</span>; }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L106\" class=\"blob-num js-line-number\" data-line-number=\"106\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC106\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L107\" class=\"blob-num js-line-number\" data-line-number=\"107\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC107\" class=\"blob-code blob-code-inner js-file-line\">        [<span class=\"pl-en\">JsonProperty</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>failed:count<span class=\"pl-pds\">&quot;</span></span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L108\" class=\"blob-num js-line-number\" data-line-number=\"108\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC108\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-en\">HangfireStat</span> <span class=\"pl-smi\">Failed</span> { <span class=\"pl-k\">get</span>; <span class=\"pl-k\">set</span>; }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L109\" class=\"blob-num js-line-number\" data-line-number=\"109\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC109\" class=\"blob-code blob-code-inner js-file-line\">    }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L110\" class=\"blob-num js-line-number\" data-line-number=\"110\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC110\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L111\" class=\"blob-num js-line-number\" data-line-number=\"111\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC111\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-en\">HangfireStat</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L112\" class=\"blob-num js-line-number\" data-line-number=\"112\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC112\" class=\"blob-code blob-code-inner js-file-line\">    {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L113\" class=\"blob-num js-line-number\" data-line-number=\"113\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC113\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-k\">string</span> <span class=\"pl-smi\">Value</span> { <span class=\"pl-k\">get</span>; <span class=\"pl-k\">set</span>; }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L114\" class=\"blob-num js-line-number\" data-line-number=\"114\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC114\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L115\" class=\"blob-num js-line-number\" data-line-number=\"115\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC115\" class=\"blob-code blob-code-inner js-file-line\">        [<span class=\"pl-en\">JsonIgnore</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L116\" class=\"blob-num js-line-number\" data-line-number=\"116\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC116\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-k\">int</span>? <span class=\"pl-smi\">ValueInt</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L117\" class=\"blob-num js-line-number\" data-line-number=\"117\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC117\" class=\"blob-code blob-code-inner js-file-line\">        {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L118\" class=\"blob-num js-line-number\" data-line-number=\"118\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC118\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">get</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L119\" class=\"blob-num js-line-number\" data-line-number=\"119\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC119\" class=\"blob-code blob-code-inner js-file-line\">            {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L120\" class=\"blob-num js-line-number\" data-line-number=\"120\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC120\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">int</span>.<span class=\"pl-en\">TryParse</span>(<span class=\"pl-smi\">Value</span>, <span class=\"pl-smi\">NumberStyles</span>.<span class=\"pl-smi\">AllowThousands</span>, <span class=\"pl-smi\">CultureInfo</span>.<span class=\"pl-smi\">InvariantCulture</span>, <span class=\"pl-k\">out</span> <span class=\"pl-k\">var</span> <span class=\"pl-smi\">valueResult</span>))</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L121\" class=\"blob-num js-line-number\" data-line-number=\"121\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC121\" class=\"blob-code blob-code-inner js-file-line\">                {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L122\" class=\"blob-num js-line-number\" data-line-number=\"122\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC122\" class=\"blob-code blob-code-inner js-file-line\">                    <span class=\"pl-k\">return</span> <span class=\"pl-smi\">valueResult</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L123\" class=\"blob-num js-line-number\" data-line-number=\"123\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC123\" class=\"blob-code blob-code-inner js-file-line\">                }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L124\" class=\"blob-num js-line-number\" data-line-number=\"124\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC124\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-k\">else</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L125\" class=\"blob-num js-line-number\" data-line-number=\"125\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC125\" class=\"blob-code blob-code-inner js-file-line\">                {</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L126\" class=\"blob-num js-line-number\" data-line-number=\"126\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC126\" class=\"blob-code blob-code-inner js-file-line\">                    <span class=\"pl-k\">return</span> <span class=\"pl-c1\">null</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L127\" class=\"blob-num js-line-number\" data-line-number=\"127\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC127\" class=\"blob-code blob-code-inner js-file-line\">                }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L128\" class=\"blob-num js-line-number\" data-line-number=\"128\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC128\" class=\"blob-code blob-code-inner js-file-line\">            }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L129\" class=\"blob-num js-line-number\" data-line-number=\"129\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC129\" class=\"blob-code blob-code-inner js-file-line\">        }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L130\" class=\"blob-num js-line-number\" data-line-number=\"130\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC130\" class=\"blob-code blob-code-inner js-file-line\">    }</td>\n      </tr>\n      <tr>\n        <td id=\"file-hangfirestatscollector-cs-L131\" class=\"blob-num js-line-number\" data-line-number=\"131\"></td>\n        <td id=\"file-hangfirestatscollector-cs-LC131\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/tonesandtones/8f45ab89e90d4474b108a35898a0d636/raw/bdd7fe6a3f2fa9529f99ef8c0ebe5f07f9ee981a/HangfireStatsCollector.cs\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/tonesandtones/8f45ab89e90d4474b108a35898a0d636#file-hangfirestatscollector-cs\">HangfireStatsCollector.cs</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>","fields":{"slug":"/visualising-hangfire-job-stats-in-powerbi/","prefix":"2018-02-28"},"frontmatter":{"title":"Visualising Hangfire job stats in Power BI","author":"Anthony Attwood","category":"visualisation","cover":{"childImageSharp":{"resize":{"src":"/static/27b08b698df2a89e6b0c8f28c4881439/630fb/hangfire-dashboard.png"}}}}},"authornote":{"id":"6d7e2776-f5bf-5717-9502-2abc45ca50f5","html":"<p><strong>Anthony Attwood</strong> I’m a consultant software engineer living and working in Perth, Australia, building solutions that solve real problems for customers.</p>"}},"pageContext":{"slug":"/visualising-hangfire-job-stats-in-powerbi/","next":{"id":"09f2f606-6906-5e31-8419-07ba635ad57a","fields":{"slug":"/what-is-this-beautiful-new-blog/","prefix":"2019-10-11","source":"posts"},"frontmatter":{"title":"What is this beautiful new blog?","category":"what?"}},"source":"posts"}},"staticQueryHashes":["2812560700","2812560700"]}